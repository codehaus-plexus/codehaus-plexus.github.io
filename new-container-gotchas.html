<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/new-container-gotchas.apt at 2022-06-09
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Brett Porter" />
    <meta name="date" content="2007-01-13" />
    <title>Plexus &#x2013; New container gotchas</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="http://codehaus-plexus.github.io/" id="bannerLeft"><img src="images/plexus-logo-trans.png"  alt="Plexus"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="./" title="Plexus">Plexus</a><span class="divider">/</span></li>
    <li class="active ">New container gotchas <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/new-container-gotchas.apt"><img src="./images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2022-06-09</li>
      <li class="pull-right"><a href="http://codehaus-plexus.github.io/" class="externalLink" title="Plexus">Plexus</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a href="" title="Books"><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="writing-components-trail/index.html" title="Writing Components"><span class="none"></span>Writing Components</a></li>
     </ul></li>
    <li><a href="" title="Guides"><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="guides/quick-start/getting-started.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
      <li><a href="guides/writing-components/00_index.html" title="Writing Plexus Components"><span class="none"></span>Writing Plexus Components</a></li>
      <li><a href="guides/developer-guide/index.html" title="Developer Guide"><span class="none"></span>Developer Guide</a></li>
     </ul></li>
    <li><a href="" title="Reference"><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="ref/why-use-components.html" title="Why Use Components?"><span class="none"></span>Why Use Components?</a></li>
      <li><a href="ref/plexus-descriptor.html" title="Plexus Descriptor"><span class="none"></span>Plexus Descriptor</a></li>
      <li><a href="guides/developer-guide/configuration/component-descriptor.html" title="Component Descriptor"><span class="none"></span>Component Descriptor</a></li>
      <li><a href="ref/component-configuration.html" title="Component Configuration"><span class="none"></span>Component Configuration</a></li>
      <li><a href="ref/technical-articles.html" title="Technical Articles"><span class="none"></span>Technical Articles</a></li>
      <li><a href="ref/available-components.html" title="Available Components"><span class="none"></span>Available Components</a></li>
      <li><a href="faq.html" title="FAQs"><span class="none"></span>FAQs</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="get-involved.html" title="Get Involved"><span class="none"></span>Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="modello/" title="Modello"><span class="none"></span>Modello</a></li>
    <li><a href="plexus-classworlds/" title="Plexus Classworlds"><span class="none"></span>Plexus Classworlds</a></li>
    <li><a href="" title="Plexus Components"><span class="icon-chevron-down"></span>Plexus Components</a>
     <ul class="nav nav-list">
      <li><a href="plexus-archiver/" title="Plexus Archiver"><span class="none"></span>Plexus Archiver</a></li>
      <li><a href="plexus-cli/" title="Plexus CLI"><span class="none"></span>Plexus CLI</a></li>
      <li><a href="plexus-compiler/" title="Plexus Compiler"><span class="none"></span>Plexus Compiler</a></li>
      <li><a href="plexus-digest/" title="Plexus Digest"><span class="none"></span>Plexus Digest</a></li>
      <li><a href="plexus-i18n/" title="Plexus i18n"><span class="none"></span>Plexus i18n</a></li>
      <li><a href="plexus-interactivity/" title="Plexus Interactivity"><span class="none"></span>Plexus Interactivity</a></li>
      <li><a href="plexus-interpolation/" title="Plexus Interpolation"><span class="none"></span>Plexus Interpolation</a></li>
      <li><a href="plexus-io/" title="Plexus IO"><span class="none"></span>Plexus IO</a></li>
      <li><a href="plexus-languages/" title="Plexus Languages"><span class="none"></span>Plexus Languages</a></li>
      <li><a href="plexus-resources/" title="Plexus Resources"><span class="none"></span>Plexus Resources</a></li>
      <li><a href="plexus-swizzle/" title="Plexus Swizzle"><span class="none"></span>Plexus Swizzle</a></li>
      <li><a href="plexus-velocity/" title="Plexus Velocity"><span class="none"></span>Plexus Velocity</a></li>
     </ul></li>
    <li><a href="" title="Plexus Parent POMs"><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
     <ul class="nav nav-list">
      <li><a href="plexus-pom/" title="Plexus"><span class="none"></span>Plexus</a></li>
      <li><a href="plexus-components/" title="Plexus Components"><span class="none"></span>Plexus Components</a></li>
     </ul></li>
    <li><a href="plexus-utils/" title="Plexus Utils"><span class="none"></span>Plexus Utils</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="http://codehaus-plexus.github.io/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script>asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="New_Container_Gotchas"></a>New Container Gotchas</h2>
<p>Due to the fundamental classloading changes in the new container, there can occasionally be clahes with old versions of the container or components designed for the other container. This document will help workaround those issues, align code appropriately, and perhaps help form a list of backwards compatibility fixes that need to be made.</p><section>
<h3><a name="New_component_API_creeping_into_dependency_tree"></a>New component API creeping into dependency tree</h3>
<p>One thing to watch out for is that if you are using an old container (alpha-10) in your application, but some of your dependencies have been updated to the new one as a compile time dependency, then the plexus-component-api artifact will be added to the tree, which can conflict with the same classes already in the alpha-10 artifact.</p>
<p><b>Workaround:</b> upgrade application to the new container, or add component-api to &lt;exclusions&gt; where necessary.</p></section><section>
<h3><a name="New_component_API_creeping_into_plugin_dependency_tree"></a>New component API creeping into plugin dependency tree</h3>
<p>Similar to above, but more serious. This causes the new component API to be loaded into the classloader of a plugin. In Maven 2.0.x, this means that many Plexus classes will be loaded from there, causing ClassNotFoundExceptions, or failed instanceof calls causing the plugins not to work. For instance, a NullPointerException for a logger is a classic case.</p>
<p><b>Workaround:</b> None known. You can add plexus-component-api to the exclusions in Maven, but this requires a new 2.0.x release. Alternatively, don't use the component API from plugins that have a prerequisite lower than Maven 2.1.</p></section><section>
<h3><a name="Maven_Jetty_Plugin"></a>Maven Jetty Plugin</h3>
<p>The Maven Jetty Plugin seems to be failing with webapps that use the plexus container in some instances. In former versions of plexus-xwork-integration, the container was forced to ignore plexus.xml from Maven using a classloader. Using the new version this appears not to work (though I suspect it would work if Maven was using the new container too - ie, trunk). More investigation needed. See <a class="externalLink" href="http://jira.codehaus.org/browse/JETTY-62"> JETTY-62</a> for the original problem that is reoccurring.</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2001&#x2013;2022
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
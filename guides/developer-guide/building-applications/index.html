<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/guides/developer-guide/building-applications/index.apt at 2024-11-24
 | Rendered using Apache Maven Fluido Skin 2.0.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <meta name="author" content="Trygve Laugstol" />
    <meta name="author" content="Emmanuel Venisse" />
    <meta name="date" content="2006-06-17" />
    <title>Developer Guide - Building Plexus Applications – Plexus Site</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-2.0.0.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />
    <script src="../../../js/apache-maven-fluido-2.0.0.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../../.././"><img class="class java.lang.Object" src="../../../images/plexus-logo-trans.png" alt="Plexus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../../.././">Plexus</a><span class="divider">/</span></li>
      <li><a href="../../../plexus-pom">Parent POM</a><span class="divider">/</span></li>
      <li><a href="../../../">Plexus</a><span class="divider">/</span></li>
    <li class="active">Developer Guide - Building Plexus Applications <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/developer-guide/building-applications/index.apt"><img src="../../../images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2024-09-25</li>
        <li class="pull-right"><a href="http://codehaus-plexus.github.io/" class="externalLink">Plexus</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="../../../index.html">Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="../../../writing-components-trail/index.html">Writing Components</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="../../../guides/quick-start/getting-started.html">Quick Start</a></li>
      <li><a href="../../../guides/writing-components/00_index.html">Writing Plexus Components</a></li>
      <li><a href="../../../guides/developer-guide/index.html">Developer Guide</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="../../../ref/why-use-components.html">Why Use Components?</a></li>
      <li><a href="../../../guides/developer-guide/configuration/component-descriptor.html">Component Descriptor</a></li>
      <li><a href="../../../ref/component-configuration.html">Component Configuration</a></li>
      <li><a href="../../../ref/available-components.html">Available Components</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink">Mailing Lists</a></li>
    <li><a href="../../../get-involved.html">Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="../../../modello/">Modello</a></li>
    <li><a href="../../../plexus-classworlds/">Plexus Classworlds</a></li>
    <li><a><span class="icon-chevron-down"></span>Plexus Components</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-archiver/">Plexus Archiver</a></li>
      <li><a href="../../../plexus-cli/">Plexus CLI</a></li>
      <li><a href="../../../plexus-compiler/">Plexus Compiler</a></li>
      <li><a href="../../../plexus-digest/">Plexus Digest</a></li>
      <li><a href="../../../plexus-i18n/">Plexus i18n</a></li>
      <li><a href="../../../plexus-interactivity/">Plexus Interactivity</a></li>
      <li><a href="../../../plexus-interpolation/">Plexus Interpolation</a></li>
      <li><a href="../../../plexus-io/">Plexus IO</a></li>
      <li><a href="../../../plexus-languages/">Plexus Languages</a></li>
      <li><a href="../../../plexus-resources/">Plexus Resources</a></li>
      <li><a href="../../../plexus-swizzle/">Plexus Swizzle</a></li>
      <li><a href="../../../plexus-velocity/">Plexus Velocity</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-pom/">Plexus</a></li>
      <li><a href="../../../plexus-components/">Plexus Components</a></li>
     </ul></li>
    <li><a href="../../../plexus-utils/">Plexus Utils</a></li>
    <li><a href="../../../plexus-xml/">Plexus XML</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://codehaus-plexus.github.io/" name="sitesearch" type="hidden" />
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Building_Plexus_Applications_and_Runtimes"></a>
<h1>Building Plexus Applications and Runtimes</h1>
<p>To be able to build Plexus applications and runtimes you'll need:</p>
<ul>
<li>The Plexus mojo</li>
<li>The Plexus application archetype</li>
<li>The Plexus runtime archetype
<p><code>TODO: Make a link to the maven site that explains what a archetype is.</code></p></li></ul></section><section><a id="Introduction"></a>
<h1>Introduction</h1>
<p>Some stub directories will be created:</p>
<dl>
<dt><code>/my-component</code></dt>
<dd>- Here we'll make a Plexus component</dd>
<dt><code>/my-application</code></dt>
<dd>- Here we'll make an application</dd>
<dt><code>/my-runtime</code></dt>
<dd>- Here we'll make a runtime that will host your application. This runtime will contain startup scripts for Unix, Windows and OS X and will be completly standalone.</dd></dl></section><section><a id="Creating_a_Simple_Plexus_Component"></a>
<h1>Creating a Simple Plexus Component</h1><section><a id="Making_the_Component_Stub"></a>
<h2>Making the Component Stub</h2>
<pre class="prettyprint linenums"><code>$ mvn archetype:create \
     -DarchetypeGroupId=org.codehaus.plexus \
     -DarchetypeArtifactId=plexus-archetype-component-simple \
     -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
     -DgroupId=mygroup \
     -DartifactId=my-component \
     -Dversion=1.0-SNAPSHOT \
     -Dpackage=my.component</code></pre></section><section><a id="Building_the_Plexus_Component"></a>
<h2>Building the Plexus Component</h2>
<p>To build the component simply type in <code>/my-component</code>:</p>
<pre class="prettyprint linenums"><code>$ mvn install</code></pre>
<p>You should now have a packaged Plexus component in <code>target/my-component-1.0-SNAPSHOT.jar</code></p></section></section><section><a id="Creating_a_Simple_Plexus_Application"></a>
<h1>Creating a Simple Plexus Application</h1><section><a id="Making_the_Application_Stub"></a>
<h2>Making the Application Stub</h2>
<pre class="prettyprint linenums"><code>$ mvn archetype:create \
     -DarchetypeGroupId=org.codehaus.plexus \
     -DarchetypeArtifactId=plexus-archetype-application \
     -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
     -DgroupId=mygroup \
     -DartifactId=my-application \
     -Dversion=1.0-SNAPSHOT \
     -Dpackage=my.app</code></pre></section><section><a id="Adding_the_Plexus_Component_dependency"></a>
<h2>Adding the Plexus Component dependency</h2>
<p>You need to add the following dependency in <code>/my-application</code> pom:</p>
<pre class="prettyprint linenums"><code>    &lt;dependency&gt;
      &lt;groupId&gt;mygroup&lt;/groupId&gt;
      &lt;artifactId&gt;my-component&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;</code></pre>
<p>and in <code>src/conf/application.xml</code>, add this so the Plexus component will be loaded at startup:</p>
<pre class="prettyprint linenums"><code>  &lt;load-on-start&gt;
    &lt;component&gt;
      &lt;role&gt;mygroup.HelloWorld&lt;/role&gt;
    &lt;/component&gt;
  &lt;/load-on-start&gt;</code></pre></section><section><a id="Building_the_Plexus_Application"></a>
<h2>Building the Plexus Application</h2>
<p>To build the application simply type in <code>/my-application</code>:</p>
<pre class="prettyprint linenums"><code>$ mvn plexus-appserver:assemble-app</code></pre>
<p>and you should have a application in <code>target/plexus-application</code>. Inside the exploded application there will be two directories: <code>conf</code> and <code>lib</code>. The <code>conf</code> directory contains the configuration file for your application and <code>lib</code> contains all the dependencies the application has.</p>
<p>If you want to do some extra processing on these files or possibly add your own files you can have a plugin with a post goal on <code>plexus:app</code> and it would be invoked before the application was packaged.</p>
<p>If you now run the <code>plexus-appserver:package-app</code> goal:</p>
<pre class="prettyprint linenums"><code>$ mvn plexus-appserver:package-app</code></pre>
<p>the resulting JAR file will be ready for deployment in a Plexus runtime. Our example application JAR will be <code>target/my-application-1.0-SNAPSHOT.jar</code>.</p>
<p>you can run the above commands in one:</p>
<pre class="prettyprint linenums"><code>$ mvn install</code></pre></section></section><section><a id="Creating_the_Runtime"></a>
<h1>Creating the Runtime</h1><section><a id="Making_the_Runtime_Stub"></a>
<h2>Making the Runtime Stub</h2>
<p>Creating the stub runtime is as easy as creating the application:</p>
<pre class="prettyprint linenums"><code>$ mvn archetype:create \
     -DarchetypeGroupId=org.codehaus.plexus \
     -DarchetypeArtifactId=plexus-archetype-runtime \
     -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
     -DgroupId=mygroup \
     -DartifactId=my-runtime \
     -Dversion=1.0-SNAPSHOT \
     -Dpackage=my.runtime</code></pre></section><section><a id="Building_the_Runtime"></a>
<h2>Building the Runtime</h2>
<pre class="prettyprint linenums"><code>$ mvn package</code></pre>
<p>You should now have a usable runtime in <code>target/plexus-runtime</code> and a packaged runtime in <code>target/my-runtime-1.0-SNAPSHOT.jar</code>. Now lets copy over the application:</p>
<pre class="prettyprint linenums"><code>$ cp ../my-application/target/my-application-1.0-SNAPSHOT.jar \
     target/plexus-app-runtime/apps</code></pre>
<p>You can also add a dependency on my-application in the my-runtime pom, so it won't be necessary to copy the application manually in the runtime.</p>
<pre class="prettyprint linenums"><code>    &lt;dependency&gt;
      &lt;groupId&gt;mygroup&lt;/groupId&gt;
      &lt;artifactId&gt;my-application&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
      &lt;type&gt;plexus-application&lt;/type&gt;
    &lt;/dependency&gt;</code></pre>
<p>Now you have a working Plexus runtime with your application installed. To start it run:</p>
<pre class="prettyprint linenums"><code>$ sh target/plexus-app-runtime/bin/plexus.sh</code></pre>
<p>Hopefully you should now have a runtime running with. The message &quot;Starting Hello Component.&quot; sended by <code>my-component</code> at startup must appears in logs.</p></section></section><section><a id="Getting_fancy.3A_Adding_a_Shared_Servlet_Container"></a>
<h1>Getting fancy: Adding a Shared Servlet Container</h1>
<p>Plexus runtimes can have a set of services thats shared between the applications. One very useful service is a servlet container. This enables several isolated applications to share the same Jetty instance without the need for complicated Apache HTTPD proxy setups. The servlet container service will all the web in a configured directory. The application contains a commented out configuration section for the servlet container which you must uncomment so the service would be enabled.</p>
<p><code>NOTE: This example assumes that you have the runtime that was created in the last section.</code></p>
<p>First add the service dependency into the runtime:</p>
<pre class="prettyprint linenums"><code>    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-appserver-service-jetty&lt;/artifactId&gt;
      &lt;version&gt;2.0-alpha-1&lt;/version&gt;
      &lt;type&gt;plexus-service&lt;/type&gt;
    &lt;/dependency&gt;</code></pre>
<p>Now we need to add a web application to the application. As a simple web application we're using the Jetty JavaDocs. Add this in <code>my-application</code> pom:</p>
<pre class="prettyprint linenums"><code>    &lt;dependency&gt;
      &lt;groupId&gt;jetty&lt;/groupId&gt;
      &lt;artifactId&gt;javadoc&lt;/artifactId&gt;
      &lt;version&gt;4.2.23RC0&lt;/version&gt;
      &lt;type&gt;war&lt;/type&gt;
    &lt;/dependency&gt;</code></pre>
<p>Now we need to configure the servlet container service so it knows where to find the web applications. In <code>src/conf/application.xml</code> uncomment the servlet container section. Now bundle the application again:</p>
<pre class="prettyprint linenums"><code>$ mvn install</code></pre>
<p>We suppose there you added <code>my-application</code> dependency in <code>my-runtime</code> pom. Execute this commands from <code>/my-runtime</code></p>
<pre class="prettyprint linenums"><code>$ mvn package</code></pre>
<p>Now when the application server is started again it should</p>
<ul>
<li>Deploy the servlet container.</li>
<li>Boot Jetty.</li>
<li>Deploy the application.</li>
<li>The servlet container will detect that a new application was deployed and deploy the JavaDoc WAR.
<p>So lets start it:</p>
<pre class="prettyprint linenums"><code>$ sh target/plexus-app-runtime/bin/plexus.sh</code></pre>
<p>And open your browser to http://localhost:8080/</p></li></ul></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2001–2024
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
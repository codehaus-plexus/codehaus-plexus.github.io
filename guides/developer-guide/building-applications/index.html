<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/guides/developer-guide/building-applications/index.apt at 2022-06-09
 | Rendered using Apache Maven Fluido Skin 1.11.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Trygve Laugstol
Emmanuel Venisse" />
    <meta name="date" content="2006-06-17" />
    <title>Plexus &#x2013; Developer Guide - Building Plexus Applications</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-1.11.0.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />
    <script src="../../../js/apache-maven-fluido-1.11.0.min.js"></script>

    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
                _paq.push(['disableCookies']);
                    _paq.push(['trackPageView']);
                    _paq.push(['enableLinkTracking']);
        
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="http://codehaus-plexus.github.io/" id="bannerLeft"><img src="../../../images/plexus-logo-trans.png"  alt="Plexus" style="" /></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../../../" title="Plexus">Plexus</a><span class="divider">/</span></li>
    <li class="active ">Developer Guide - Building Plexus Applications <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/developer-guide/building-applications/index.apt"><img src="../../../images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2022-06-09</li>
        <li class="pull-right"><a href="http://codehaus-plexus.github.io/" class="externalLink" title="Plexus">Plexus</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="../../../index.html" title="Overview"><span class="none"></span>Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a href="../../../" title="Books"><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="../../../writing-components-trail/index.html" title="Writing Components"><span class="none"></span>Writing Components</a></li>
     </ul></li>
    <li><a href="../../../" title="Guides"><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="../../../guides/quick-start/getting-started.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
      <li><a href="../../../guides/writing-components/00_index.html" title="Writing Plexus Components"><span class="none"></span>Writing Plexus Components</a></li>
      <li><a href="../../../guides/developer-guide/index.html" title="Developer Guide"><span class="none"></span>Developer Guide</a></li>
     </ul></li>
    <li><a href="../../../" title="Reference"><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="../../../ref/why-use-components.html" title="Why Use Components?"><span class="none"></span>Why Use Components?</a></li>
      <li><a href="../../../ref/plexus-descriptor.html" title="Plexus Descriptor"><span class="none"></span>Plexus Descriptor</a></li>
      <li><a href="../../../guides/developer-guide/configuration/component-descriptor.html" title="Component Descriptor"><span class="none"></span>Component Descriptor</a></li>
      <li><a href="../../../ref/component-configuration.html" title="Component Configuration"><span class="none"></span>Component Configuration</a></li>
      <li><a href="../../../ref/technical-articles.html" title="Technical Articles"><span class="none"></span>Technical Articles</a></li>
      <li><a href="../../../ref/available-components.html" title="Available Components"><span class="none"></span>Available Components</a></li>
      <li><a href="../../../faq.html" title="FAQs"><span class="none"></span>FAQs</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="../../../get-involved.html" title="Get Involved"><span class="none"></span>Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="../../../modello/" title="Modello"><span class="none"></span>Modello</a></li>
    <li><a href="../../../plexus-classworlds/" title="Plexus Classworlds"><span class="none"></span>Plexus Classworlds</a></li>
    <li><a href="../../../" title="Plexus Components"><span class="icon-chevron-down"></span>Plexus Components</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-archiver/" title="Plexus Archiver"><span class="none"></span>Plexus Archiver</a></li>
      <li><a href="../../../plexus-cli/" title="Plexus CLI"><span class="none"></span>Plexus CLI</a></li>
      <li><a href="../../../plexus-compiler/" title="Plexus Compiler"><span class="none"></span>Plexus Compiler</a></li>
      <li><a href="../../../plexus-digest/" title="Plexus Digest"><span class="none"></span>Plexus Digest</a></li>
      <li><a href="../../../plexus-i18n/" title="Plexus i18n"><span class="none"></span>Plexus i18n</a></li>
      <li><a href="../../../plexus-interactivity/" title="Plexus Interactivity"><span class="none"></span>Plexus Interactivity</a></li>
      <li><a href="../../../plexus-interpolation/" title="Plexus Interpolation"><span class="none"></span>Plexus Interpolation</a></li>
      <li><a href="../../../plexus-io/" title="Plexus IO"><span class="none"></span>Plexus IO</a></li>
      <li><a href="../../../plexus-languages/" title="Plexus Languages"><span class="none"></span>Plexus Languages</a></li>
      <li><a href="../../../plexus-resources/" title="Plexus Resources"><span class="none"></span>Plexus Resources</a></li>
      <li><a href="../../../plexus-swizzle/" title="Plexus Swizzle"><span class="none"></span>Plexus Swizzle</a></li>
      <li><a href="../../../plexus-velocity/" title="Plexus Velocity"><span class="none"></span>Plexus Velocity</a></li>
     </ul></li>
    <li><a href="../../../" title="Plexus Parent POMs"><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-pom/" title="Plexus"><span class="none"></span>Plexus</a></li>
      <li><a href="../../../plexus-components/" title="Plexus Components"><span class="none"></span>Plexus Components</a></li>
     </ul></li>
    <li><a href="../../../plexus-utils/" title="Plexus Utils"><span class="none"></span>Plexus Utils</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://codehaus-plexus.github.io/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script>asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Building_Plexus_Applications_and_Runtimes"></a>Building Plexus Applications and Runtimes</h2>
<p>To be able to build Plexus applications and runtimes you'll need:</p>
<ul>
<li>The Plexus mojo</li>
<li>The Plexus application archetype</li>
<li>The Plexus runtime archetype
<p><code>TODO: Make a link to the maven site that explains what a archetype is.</code></p></li></ul></section><section>
<h2><a name="Introduction"></a>Introduction</h2>
<p>Some stub directories will be created:</p>
<dl>
<dt><code>/my-component</code></dt>
<dd>- Here we'll make a Plexus component</dd>
<dt><code>/my-application</code></dt>
<dd>- Here we'll make an application</dd>
<dt><code>/my-runtime</code></dt>
<dd>- Here we'll make a runtime that will host your application. This runtime will contain startup scripts for Unix, Windows and OS X and will be completly standalone.</dd></dl></section><section>
<h2><a name="Creating_a_Simple_Plexus_Component"></a>Creating a Simple Plexus Component</h2><section>
<h3><a name="Making_the_Component_Stub"></a>Making the Component Stub</h3>
<div class="source"><pre class="prettyprint linenums">$ mvn archetype:create \
     -DarchetypeGroupId=org.codehaus.plexus \
     -DarchetypeArtifactId=plexus-archetype-component-simple \
     -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
     -DgroupId=mygroup \
     -DartifactId=my-component \
     -Dversion=1.0-SNAPSHOT \
     -Dpackage=my.component</pre></div></section><section>
<h3><a name="Building_the_Plexus_Component"></a>Building the Plexus Component</h3>
<p>To build the component simply type in <code>/my-component</code>:</p>
<div class="source"><pre class="prettyprint linenums">$ mvn install</pre></div>
<p>You should now have a packaged Plexus component in <code>target/my-component-1.0-SNAPSHOT.jar</code></p></section></section><section>
<h2><a name="Creating_a_Simple_Plexus_Application"></a>Creating a Simple Plexus Application</h2><section>
<h3><a name="Making_the_Application_Stub"></a>Making the Application Stub</h3>
<div class="source"><pre class="prettyprint linenums">$ mvn archetype:create \
     -DarchetypeGroupId=org.codehaus.plexus \
     -DarchetypeArtifactId=plexus-archetype-application \
     -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
     -DgroupId=mygroup \
     -DartifactId=my-application \
     -Dversion=1.0-SNAPSHOT \
     -Dpackage=my.app</pre></div></section><section>
<h3><a name="Adding_the_Plexus_Component_dependency"></a>Adding the Plexus Component dependency</h3>
<p>You need to add the following dependency in <code>/my-application</code> pom:</p>
<div class="source"><pre class="prettyprint linenums">    &lt;dependency&gt;
      &lt;groupId&gt;mygroup&lt;/groupId&gt;
      &lt;artifactId&gt;my-component&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;</pre></div>
<p>and in <code>src/conf/application.xml</code>, add this so the Plexus component will be loaded at startup:</p>
<div class="source"><pre class="prettyprint linenums">  &lt;load-on-start&gt;
    &lt;component&gt;
      &lt;role&gt;mygroup.HelloWorld&lt;/role&gt;
    &lt;/component&gt;
  &lt;/load-on-start&gt;</pre></div></section><section>
<h3><a name="Building_the_Plexus_Application"></a>Building the Plexus Application</h3>
<p>To build the application simply type in <code>/my-application</code>:</p>
<div class="source"><pre class="prettyprint linenums">$ mvn plexus-appserver:assemble-app</pre></div>
<p>and you should have a application in <code>target/plexus-application</code>. Inside the exploded application there will be two directories: <code>conf</code> and <code>lib</code>. The <code>conf</code> directory contains the configuration file for your application and <code>lib</code> contains all the dependencies the application has.</p>
<p>If you want to do some extra processing on these files or possibly add your own files you can have a plugin with a post goal on <code>plexus:app</code> and it would be invoked before the application was packaged.</p>
<p>If you now run the <code>plexus-appserver:package-app</code> goal:</p>
<div class="source"><pre class="prettyprint linenums">$ mvn plexus-appserver:package-app</pre></div>
<p>the resulting JAR file will be ready for deployment in a Plexus runtime. Our example application JAR will be <code>target/my-application-1.0-SNAPSHOT.jar</code>.</p>
<p>you can run the above commands in one:</p>
<div class="source"><pre class="prettyprint linenums">$ mvn install</pre></div></section></section><section>
<h2><a name="Creating_the_Runtime"></a>Creating the Runtime</h2><section>
<h3><a name="Making_the_Runtime_Stub"></a>Making the Runtime Stub</h3>
<p>Creating the stub runtime is as easy as creating the application:</p>
<div class="source"><pre class="prettyprint linenums">$ mvn archetype:create \
     -DarchetypeGroupId=org.codehaus.plexus \
     -DarchetypeArtifactId=plexus-archetype-runtime \
     -DarchetypeVersion=1.0-alpha-1-SNAPSHOT \
     -DgroupId=mygroup \
     -DartifactId=my-runtime \
     -Dversion=1.0-SNAPSHOT \
     -Dpackage=my.runtime</pre></div></section><section>
<h3><a name="Building_the_Runtime"></a>Building the Runtime</h3>
<div class="source"><pre class="prettyprint linenums">$ mvn package</pre></div>
<p>You should now have a usable runtime in <code>target/plexus-runtime</code> and a packaged runtime in <code>target/my-runtime-1.0-SNAPSHOT.jar</code>. Now lets copy over the application:</p>
<div class="source"><pre class="prettyprint linenums">$ cp ../my-application/target/my-application-1.0-SNAPSHOT.jar \
     target/plexus-app-runtime/apps</pre></div>
<p>You can also add a dependency on my-application in the my-runtime pom, so it won't be necessary to copy the application manually in the runtime.</p>
<div class="source"><pre class="prettyprint linenums">    &lt;dependency&gt;
      &lt;groupId&gt;mygroup&lt;/groupId&gt;
      &lt;artifactId&gt;my-application&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
      &lt;type&gt;plexus-application&lt;/type&gt;
    &lt;/dependency&gt;</pre></div>
<p>Now you have a working Plexus runtime with your application installed. To start it run:</p>
<div class="source"><pre class="prettyprint linenums">$ sh target/plexus-app-runtime/bin/plexus.sh</pre></div>
<p>Hopefully you should now have a runtime running with. The message &quot;Starting Hello Component.&quot; sended by <code>my-component</code> at startup must appears in logs.</p></section></section><section>
<h2><a name="Getting_fancy:_Adding_a_Shared_Servlet_Container"></a>Getting fancy: Adding a Shared Servlet Container</h2>
<p>Plexus runtimes can have a set of services thats shared between the applications. One very useful service is a servlet container. This enables several isolated applications to share the same Jetty instance without the need for complicated Apache HTTPD proxy setups. The servlet container service will all the web in a configured directory. The application contains a commented out configuration section for the servlet container which you must uncomment so the service would be enabled.</p>
<p><code>NOTE: This example assumes that you have the runtime that was created in the last section.</code></p>
<p>First add the service dependency into the runtime:</p>
<div class="source"><pre class="prettyprint linenums">    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-appserver-service-jetty&lt;/artifactId&gt;
      &lt;version&gt;2.0-alpha-1&lt;/version&gt;
      &lt;type&gt;plexus-service&lt;/type&gt;
    &lt;/dependency&gt;</pre></div>
<p>Now we need to add a web application to the application. As a simple web application we're using the Jetty JavaDocs. Add this in <code>my-application</code> pom:</p>
<div class="source"><pre class="prettyprint linenums">    &lt;dependency&gt;
      &lt;groupId&gt;jetty&lt;/groupId&gt;
      &lt;artifactId&gt;javadoc&lt;/artifactId&gt;
      &lt;version&gt;4.2.23RC0&lt;/version&gt;
      &lt;type&gt;war&lt;/type&gt;
    &lt;/dependency&gt;</pre></div>
<p>Now we need to configure the servlet container service so it knows where to find the web applications. In <code>src/conf/application.xml</code> uncomment the servlet container section. Now bundle the application again:</p>
<div class="source"><pre class="prettyprint linenums">$ mvn install</pre></div>
<p>We suppose there you added <code>my-application</code> dependency in <code>my-runtime</code> pom. Execute this commands from <code>/my-runtime</code></p>
<div class="source"><pre class="prettyprint linenums">$ mvn package</pre></div>
<p>Now when the application server is started again it should</p>
<ul>
<li>Deploy the servlet container.</li>
<li>Boot Jetty.</li>
<li>Deploy the application.</li>
<li>The servlet container will detect that a new application was deployed and deploy the JavaDoc WAR.
<p>So lets start it:</p>
<div class="source"><pre class="prettyprint linenums">$ sh target/plexus-app-runtime/bin/plexus.sh</pre></div>
<p>And open your browser to http://localhost:8080/</p></li></ul></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2001&#x2013;2022
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/guides/developer-guide/configuration/component-descriptor.apt at 2025-02-04
 | Rendered using Apache Maven Fluido Skin 2.0.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <meta name="author" content="Rahul Thakur" />
    <meta name="date" content="2006-06-17" />
    <title>Developer Guide - Plexus Component Descriptor – Plexus Site</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-2.0.0.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />
    <script src="../../../js/apache-maven-fluido-2.0.0.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../../.././"><img class="class java.lang.Object" src="../../../images/plexus-logo-trans.png" alt="Plexus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../../.././">Plexus</a><span class="divider">/</span></li>
      <li><a href="../../../plexus-pom">Parent POM</a><span class="divider">/</span></li>
      <li><a href="../../../">Plexus</a><span class="divider">/</span></li>
    <li class="active">Developer Guide - Plexus Component Descriptor <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/developer-guide/configuration/component-descriptor.apt"><img src="../../../images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2024-09-25</li>
        <li class="pull-right"><span class="divider">|</span>
<a href="http://codehaus-plexus.github.io/" class="externalLink">Plexus</a></li>
        <li class="pull-right"><span class="divider">|</span>
<a href="https://www.eclipse.org/sisu/" class="externalLink">Eclipse Sisu</a></li>
        <li class="pull-right"><a href="https://jcp.org/en/jsr/detail?id=330" class="externalLink">JSR-330</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="../../../index.html">Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="../../../writing-components-trail/index.html">Writing Components</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="../../../guides/quick-start/getting-started.html">Quick Start</a></li>
      <li><a href="../../../guides/writing-components/00_index.html">Writing Plexus Components</a></li>
      <li><a href="../../../guides/developer-guide/index.html">Developer Guide</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="../../../ref/why-use-components.html">Why Use Components?</a></li>
      <li class="active"><a>Component Descriptor</a></li>
      <li><a href="../../../ref/component-configuration.html">Component Configuration</a></li>
      <li><a href="../../../ref/available-components.html">Available Components</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink">Mailing Lists</a></li>
    <li><a href="../../../get-involved.html">Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="../../../modello/">Modello</a></li>
    <li><a href="../../../plexus-classworlds/">Plexus Classworlds</a></li>
    <li><a><span class="icon-chevron-down"></span>Plexus Components</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-archiver/">Plexus Archiver</a></li>
      <li><a href="../../../plexus-cli/">Plexus CLI</a></li>
      <li><a href="../../../plexus-compiler/">Plexus Compiler</a></li>
      <li><a href="../../../plexus-digest/">Plexus Digest</a></li>
      <li><a href="../../../plexus-i18n/">Plexus i18n</a></li>
      <li><a href="../../../plexus-interactivity/">Plexus Interactivity</a></li>
      <li><a href="../../../plexus-interpolation/">Plexus Interpolation</a></li>
      <li><a href="../../../plexus-io/">Plexus IO</a></li>
      <li><a href="../../../plexus-languages/">Plexus Languages</a></li>
      <li><a href="../../../plexus-resources/">Plexus Resources</a></li>
      <li><a href="../../../plexus-swizzle/">Plexus Swizzle</a></li>
      <li><a href="../../../plexus-velocity/">Plexus Velocity</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-pom/">Plexus</a></li>
      <li><a href="../../../plexus-components/">Plexus Components</a></li>
     </ul></li>
    <li><a href="../../../plexus-utils/">Plexus Utils</a></li>
    <li><a href="../../../plexus-xml/">Plexus XML</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://codehaus-plexus.github.io/" name="sitesearch" type="hidden" />
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<p><code>The contents of this document are a work in progress</code></p><section><a id="Plexus_Component_Descriptor"></a>
<h1>Plexus Component Descriptor</h1>
<p>We are discussing the component descriptors for components which are compatible with <a href="../personalities/plexus-personality.html">Plexus Personality</a>. We show a limited picture of what can be done with components and component descriptors in Plexus.</p>
<p>Nevertheless what you learn here should be sufficient to write even a large Plexus application!</p>
<p>A component descriptor describes the properties of a component required by the container in order to manage the lifecycle of that component. Let's take a look at the simplest example of a component descriptor:</p>
<pre class="prettyprint linenums"><code>&lt;component-sets&gt;
  &lt;components&gt;
    &lt;component&gt;
      &lt;role&gt;foo.Foo&lt;/role&gt;
      &lt;implementation&gt;foo.DefaultFoo&lt;/implementation&gt;
    &lt;/component&gt;
  &lt;/components&gt;
&lt;/component-sets&gt;</code></pre>
<p>It starts off with a <code>component</code> tag, then values for the <code>role</code> and <code>implementation</code> tags are defined. The <code>role</code> tag defines the interface provided by this component. It is usually the name of the Java interface. Names of the classes (including abstract) are also allowed. You are not allowed to use arbitrary strings. The <code>implementation</code> tag tells Plexus what you want to use to implement the specified <code>role</code>. In a normal case you will have to specify the name of the java class (<code>foo.DefaultFoo</code> in the example above), which implements the given interface (role).</p>
<p>If there is more than one component which provides an implementation of a given role you can differentiate them with the help of the <code>role-hint</code> attribute:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;componentA&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooA&lt;/implementation&gt;
&lt;component&gt;

&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;componentB&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooB&lt;/implementation&gt;
&lt;component&gt;
...</code></pre>
<p>The <code>role</code> and the <code>role-hint</code> are what defines <a href="../building-components/component-identity.html">component identity</a> and what you use to look up your component from Plexus. The <code>role-hint</code> tag is optional. It serves as an extra id qualifier that allows you to differentiate components of the same type (role). You can use any arbitrary string you like as the value of the <code>role-hint</code> attribute. Note that you can deploy the same implementation of the component two or more times with different <code>role-hint</code>s e.g.:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;instance-one&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooA&lt;/implementation&gt;
&lt;component&gt;

&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;instance-two&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooA&lt;/implementation&gt;
&lt;component&gt;
...</code></pre><section><a id="Requirements"></a>
<h2>Requirements</h2>
<p>Components aren't very useful as isolated entities nor are they always ready to use standalone. They become useful when we connect them together with other components and provide configuration settings to them. There are several different ways to compose your system from components.</p>
<p>The default, and the simplest of them, is a part of <a href="../personalities/plexus-personality.html">Plexus Personality</a> This uses a strategy called 'field injection' for wiring components. This means that Plexus takes selected objects and assigns them to fields of component objects.</p>
<p>How does Plexus know into which fields requirements should be injected and what those requirements are? There is a <code>requirements</code> section in the component descriptor where you declare what components you depend on:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  ...
  &lt;requirements&gt;
    &lt;requirement&gt;
      ...
    &lt;/requirement&gt;
    &lt;requirement&gt;
      ...
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;/component&gt;
...</code></pre>
<p>In a simple case the declaration of a dependency looks like this:</p>
<pre class="prettyprint linenums"><code>  ...
  &lt;requirement&gt;
    &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
  &lt;/requirement&gt;
  ...</code></pre>
<p>In the case when you want to declare a dependecy on a component which has specified both <code>role</code> and <code>role-hint</code> attributes you use:</p>
<pre class="prettyprint linenums"><code>  ...
  &lt;requirement&gt;
    &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
    &lt;role-hint&gt;foo&lt;/role-hint&gt;
  &lt;/requirement&gt;
  ...</code></pre>
<p>In any case Component Composer will try to find a matching field and property for the given requirements. In the standard case the component composer will try to find a field in the component class (this is usually a private field), which has a type which matches the requirement's <code>role</code>.</p>
<p>For example in the case of this Java class:</p>
<pre class="prettyprint linenums"><code>package foo;
public class SomeComponentImpl
{
     // this is a &quot;requirement&quot; of this component
     org.codehaus.plexus.ComponentA  a;

     // this is ordinary field
     int  b;
}</code></pre>
<p>You will need to prepare the following component descriptor which lists ComponentA as a requirement:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;implementation&gt;foo.SomeComponentImpl&lt;/implementation&gt;
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;component&gt;
...</code></pre><section><a id="Collections"></a>
<h3>Collections</h3>
<p>Plexus can also inject Maps, List or arrays of dependent components. In the case of arrays of components the same approach is applied as in the case of &quot;singular&quot; dependencies. The only difference is that all visible implementations of a given role will be used.</p>
<p>Java:</p>
<pre class="prettyprint linenums"><code>package foo;
public class SomeComponentImpl
{
     org.codehaus.plexus.ComponentA  a[];
}</code></pre>
<p>XML Descriptor:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;implementation&gt;foo.SomeComponentImpl&lt;/implementation&gt;
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;/component&gt;

...

&lt;component&gt;
  &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
  &lt;role-hint&gt;A&lt;/role-hint&gt;
  ...
&lt;/component&gt;
&lt;component&gt;
  &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
  &lt;role-hint&gt;B&lt;/role-hint&gt;
  ...
&lt;/component&gt;
...</code></pre>
<p>In case of a <code>List</code>, or a <code>Map</code> you must explicitly define where dependencies should be injected. You can do this with the help of the <code>field-name</code> tag:</p>
<p>XML Descriptor:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  ...
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;foo&lt;/role-hint&gt;
      &lt;field-name&gt;mapA&lt;/field-name&gt;
    &lt;/requirement&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;bar&lt;/role-hint&gt;
      &lt;field-name&gt;listB&lt;/field-name&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;/component&gt;
...</code></pre>
<p>Java:</p>
<pre class="prettyprint linenums"><code>package foo;
public class SomeComponentImpl
{
       private Map mapA;
       private List listB;
}</code></pre>
<p><b>Note</b> that when using a Map the value of a component's <code>role-hint</code> is used as the key and the component instance is used as the value.</p>
<p>You can also use the <code>field</code> tag for a &quot;singular&quot; component's requirements.</p>
<p>XML Descriptor:</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  ...
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;foo&lt;/role-hint&gt;
      &lt;field&gt;b1&lt;/field&gt;
    &lt;/requirement&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;bar&lt;/role-hint&gt;
      &lt;field&gt;b2&lt;/field&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;component&gt;
...</code></pre>
<p>Java:</p>
<pre class="prettyprint linenums"><code>package foo;
public class SomeComponentImpl
{
    //(component with role-hint = &quot;foo&quot; will be injected here)
    org.codehaus.plexus.ComponentB  b1;

    //(component with role-hint = &quot;bar&quot; will be injected here)
    org.codehaus.plexus.ComponentB  b2;
}</code></pre>
<p>Explicit specification into which field dependencies should be injected is considered to be a good pattern and might even be required in future versions of Plexus.</p></section><section><a id="Configuration"></a>
<h3>Configuration</h3>
<p>Lastly, there is an optional configuration section which is used to configure your component.</p>
<pre class="prettyprint linenums"><code>...
&lt;component&gt;
  ...
  &lt;configuration&gt;
    &lt;a&gt;bleh&lt;/a&gt;
    &lt;b&gt;
      &lt;x&gt;1&lt;/x&gt;
      &lt;y&gt;2.0f&lt;/y&gt;
    &lt;/b&gt;
  &lt;/configuration&gt;
&lt;component&gt;
...</code></pre>
<p>You may read more about it <a href="./plexus-auto-configuration.html">here</a>.</p>
<p>And that's all you need to know about component configuration to get you started!</p>
<p><b>Important remark</b>: Component configuration and component requirements (definition of dependencies on some other components) are separated in Plexus. In some popular containers like Spring this is not the case. The reason for this is that component requirements are constant - components always needs to use the same set of services provided by other components in order to function properly. But configuration of a component is more dynamic. For example components which provide an implementation of a jdbc database connection pool must always be configured in each application which uses it.</p>
<p>If you want to learn more about more advanced options you can read <a href="./component-descriptor-specification.xml">Component Descriptor</a>.</p></section></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2001–2025
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/guides/developer-guide/configuration/component-descriptor.apt at 2022-06-09
 | Rendered using Apache Maven Fluido Skin 1.11.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Rahul Thakur" />
    <meta name="date" content="2006-06-17" />
    <title>Plexus &#x2013; Developer Guide - Plexus Component Descriptor</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-1.11.0.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />
    <script src="../../../js/apache-maven-fluido-1.11.0.min.js"></script>

    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
                _paq.push(['disableCookies']);
                    _paq.push(['trackPageView']);
                    _paq.push(['enableLinkTracking']);
        
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="http://codehaus-plexus.github.io/" id="bannerLeft"><img src="../../../images/plexus-logo-trans.png"  alt="Plexus" style="" /></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../../../" title="Plexus">Plexus</a><span class="divider">/</span></li>
    <li class="active ">Developer Guide - Plexus Component Descriptor <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/developer-guide/configuration/component-descriptor.apt"><img src="../../../images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2022-06-09</li>
        <li class="pull-right"><a href="http://codehaus-plexus.github.io/" class="externalLink" title="Plexus">Plexus</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="../../../index.html" title="Overview"><span class="none"></span>Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a href="../../../" title="Books"><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="../../../writing-components-trail/index.html" title="Writing Components"><span class="none"></span>Writing Components</a></li>
     </ul></li>
    <li><a href="../../../" title="Guides"><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="../../../guides/quick-start/getting-started.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
      <li><a href="../../../guides/writing-components/00_index.html" title="Writing Plexus Components"><span class="none"></span>Writing Plexus Components</a></li>
      <li><a href="../../../guides/developer-guide/index.html" title="Developer Guide"><span class="none"></span>Developer Guide</a></li>
     </ul></li>
    <li><a href="../../../" title="Reference"><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="../../../ref/why-use-components.html" title="Why Use Components?"><span class="none"></span>Why Use Components?</a></li>
      <li><a href="../../../ref/plexus-descriptor.html" title="Plexus Descriptor"><span class="none"></span>Plexus Descriptor</a></li>
      <li class="active"><a><span class="none"></span>Component Descriptor</a></li>
      <li><a href="../../../ref/component-configuration.html" title="Component Configuration"><span class="none"></span>Component Configuration</a></li>
      <li><a href="../../../ref/technical-articles.html" title="Technical Articles"><span class="none"></span>Technical Articles</a></li>
      <li><a href="../../../ref/available-components.html" title="Available Components"><span class="none"></span>Available Components</a></li>
      <li><a href="../../../faq.html" title="FAQs"><span class="none"></span>FAQs</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="../../../get-involved.html" title="Get Involved"><span class="none"></span>Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="../../../modello/" title="Modello"><span class="none"></span>Modello</a></li>
    <li><a href="../../../plexus-classworlds/" title="Plexus Classworlds"><span class="none"></span>Plexus Classworlds</a></li>
    <li><a href="../../../" title="Plexus Components"><span class="icon-chevron-down"></span>Plexus Components</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-archiver/" title="Plexus Archiver"><span class="none"></span>Plexus Archiver</a></li>
      <li><a href="../../../plexus-cli/" title="Plexus CLI"><span class="none"></span>Plexus CLI</a></li>
      <li><a href="../../../plexus-compiler/" title="Plexus Compiler"><span class="none"></span>Plexus Compiler</a></li>
      <li><a href="../../../plexus-digest/" title="Plexus Digest"><span class="none"></span>Plexus Digest</a></li>
      <li><a href="../../../plexus-i18n/" title="Plexus i18n"><span class="none"></span>Plexus i18n</a></li>
      <li><a href="../../../plexus-interactivity/" title="Plexus Interactivity"><span class="none"></span>Plexus Interactivity</a></li>
      <li><a href="../../../plexus-interpolation/" title="Plexus Interpolation"><span class="none"></span>Plexus Interpolation</a></li>
      <li><a href="../../../plexus-io/" title="Plexus IO"><span class="none"></span>Plexus IO</a></li>
      <li><a href="../../../plexus-languages/" title="Plexus Languages"><span class="none"></span>Plexus Languages</a></li>
      <li><a href="../../../plexus-resources/" title="Plexus Resources"><span class="none"></span>Plexus Resources</a></li>
      <li><a href="../../../plexus-swizzle/" title="Plexus Swizzle"><span class="none"></span>Plexus Swizzle</a></li>
      <li><a href="../../../plexus-velocity/" title="Plexus Velocity"><span class="none"></span>Plexus Velocity</a></li>
     </ul></li>
    <li><a href="../../../" title="Plexus Parent POMs"><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
     <ul class="nav nav-list">
      <li><a href="../../../plexus-pom/" title="Plexus"><span class="none"></span>Plexus</a></li>
      <li><a href="../../../plexus-components/" title="Plexus Components"><span class="none"></span>Plexus Components</a></li>
     </ul></li>
    <li><a href="../../../plexus-utils/" title="Plexus Utils"><span class="none"></span>Plexus Utils</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://codehaus-plexus.github.io/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script>asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<p><code>The contents of this document are a work in progress</code></p><section>
<h2><a name="Plexus_Component_Descriptor"></a>Plexus Component Descriptor</h2>
<p>We are discussing the component descriptors for components which are compatible with <a href="../personalities/plexus-personality.html">Plexus Personality</a>. We show a limited picture of what can be done with components and component descriptors in Plexus.</p>
<p>Nevertheless what you learn here should be sufficient to write even a large Plexus application!</p>
<p>A component descriptor describes the properties of a component required by the container in order to manage the lifecycle of that component. Let's take a look at the simplest example of a component descriptor:</p>
<div class="source"><pre class="prettyprint linenums">&lt;component-sets&gt;
  &lt;components&gt;
    &lt;component&gt;
      &lt;role&gt;foo.Foo&lt;/role&gt;
      &lt;implementation&gt;foo.DefaultFoo&lt;/implementation&gt;
    &lt;/component&gt;
  &lt;/components&gt;
&lt;/component-sets&gt;</pre></div>
<p>It starts off with a <code>component</code> tag, then values for the <code>role</code> and <code>implementation</code> tags are defined. The <code>role</code> tag defines the interface provided by this component. It is usually the name of the Java interface. Names of the classes (including abstract) are also allowed. You are not allowed to use arbitrary strings. The <code>implementation</code> tag tells Plexus what you want to use to implement the specified <code>role</code>. In a normal case you will have to specify the name of the java class (<code>foo.DefaultFoo</code> in the example above), which implements the given interface (role).</p>
<p>If there is more than one component which provides an implementation of a given role you can differentiate them with the help of the <code>role-hint</code> attribute:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;componentA&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooA&lt;/implementation&gt;
&lt;component&gt;

&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;componentB&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooB&lt;/implementation&gt;
&lt;component&gt;
...</pre></div>
<p>The <code>role</code> and the <code>role-hint</code> are what defines <a href="../building-components/component-identity.html">component identity</a> and what you use to look up your component from Plexus. The <code>role-hint</code> tag is optional. It serves as an extra id qualifier that allows you to differentiate components of the same type (role). You can use any arbitrary string you like as the value of the <code>role-hint</code> attribute. Note that you can deploy the same implementation of the component two or more times with different <code>role-hint</code>s e.g.:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;instance-one&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooA&lt;/implementation&gt;
&lt;component&gt;

&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;role-hint&gt;instance-two&lt;/role-hint&gt;
  &lt;implementation&gt;foo.FooA&lt;/implementation&gt;
&lt;component&gt;
...</pre></div><section>
<h3><a name="Requirements"></a>Requirements</h3>
<p>Components aren't very useful as isolated entities nor are they always ready to use standalone. They become useful when we connect them together with other components and provide configuration settings to them. There are several different ways to compose your system from components.</p>
<p>The default, and the simplest of them, is a part of <a href="../personalities/plexus-personality.html">Plexus Personality</a> This uses a strategy called 'field injection' for wiring components. This means that Plexus takes selected objects and assigns them to fields of component objects.</p>
<p>How does Plexus know into which fields requirements should be injected and what those requirements are? There is a <code>requirements</code> section in the component descriptor where you declare what components you depend on:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  ...
  &lt;requirements&gt;
    &lt;requirement&gt;
      ...
    &lt;/requirement&gt;
    &lt;requirement&gt;
      ...
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;/component&gt;
...</pre></div>
<p>In a simple case the declaration of a dependency looks like this:</p>
<div class="source"><pre class="prettyprint linenums">  ...
  &lt;requirement&gt;
    &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
  &lt;/requirement&gt;
  ...</pre></div>
<p>In the case when you want to declare a dependecy on a component which has specified both <code>role</code> and <code>role-hint</code> attributes you use:</p>
<div class="source"><pre class="prettyprint linenums">  ...
  &lt;requirement&gt;
    &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
    &lt;role-hint&gt;foo&lt;/role-hint&gt;
  &lt;/requirement&gt;
  ...</pre></div>
<p>In any case Component Composer will try to find a matching field and property for the given requirements. In the standard case the component composer will try to find a field in the component class (this is usually a private field), which has a type which matches the requirement's <code>role</code>.</p>
<p>For example in the case of this Java class:</p>
<div class="source"><pre class="prettyprint linenums">package foo;
public class SomeComponentImpl
{
     // this is a &quot;requirement&quot; of this component
     org.codehaus.plexus.ComponentA  a;

     // this is ordinary field
     int  b;
}</pre></div>
<p>You will need to prepare the following component descriptor which lists ComponentA as a requirement:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;implementation&gt;foo.SomeComponentImpl&lt;/implementation&gt;
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;component&gt;
...</pre></div><section>
<h4><a name="Collections"></a>Collections</h4>
<p>Plexus can also inject Maps, List or arrays of dependent components. In the case of arrays of components the same approach is applied as in the case of &quot;singular&quot; dependencies. The only difference is that all visible implementations of a given role will be used.</p>
<p>Java:</p>
<div class="source"><pre class="prettyprint linenums">package foo;
public class SomeComponentImpl
{
     org.codehaus.plexus.ComponentA  a[];
}</pre></div>
<p>XML Descriptor:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  &lt;role&gt;foo.SomeComponent&lt;/role&gt;
  &lt;implementation&gt;foo.SomeComponentImpl&lt;/implementation&gt;
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;/component&gt;

...

&lt;component&gt;
  &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
  &lt;role-hint&gt;A&lt;/role-hint&gt;
  ...
&lt;/component&gt;
&lt;component&gt;
  &lt;role&gt;org.codehaus.plexus.ComponentA&lt;/role&gt;
  &lt;role-hint&gt;B&lt;/role-hint&gt;
  ...
&lt;/component&gt;
...</pre></div>
<p>In case of a <code>List</code>, or a <code>Map</code> you must explicitly define where dependencies should be injected. You can do this with the help of the <code>field-name</code> tag:</p>
<p>XML Descriptor:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  ...
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;foo&lt;/role-hint&gt;
      &lt;field-name&gt;mapA&lt;/field-name&gt;
    &lt;/requirement&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;bar&lt;/role-hint&gt;
      &lt;field-name&gt;listB&lt;/field-name&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;/component&gt;
...</pre></div>
<p>Java:</p>
<div class="source"><pre class="prettyprint linenums">package foo;
public class SomeComponentImpl
{
       private Map mapA;
       private List listB;
}</pre></div>
<p><b>Note</b> that when using a Map the value of a component's <code>role-hint</code> is used as the key and the component instance is used as the value.</p>
<p>You can also use the <code>field</code> tag for a &quot;singular&quot; component's requirements.</p>
<p>XML Descriptor:</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  ...
  &lt;requirements&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;foo&lt;/role-hint&gt;
      &lt;field&gt;b1&lt;/field&gt;
    &lt;/requirement&gt;
    &lt;requirement&gt;
      &lt;role&gt;org.codehaus.plexus.ComponentB&lt;/role&gt;
      &lt;role-hint&gt;bar&lt;/role-hint&gt;
      &lt;field&gt;b2&lt;/field&gt;
    &lt;/requirement&gt;
  &lt;/requirements&gt;
&lt;component&gt;
...</pre></div>
<p>Java:</p>
<div class="source"><pre class="prettyprint linenums">package foo;
public class SomeComponentImpl
{
    //(component with role-hint = &quot;foo&quot; will be injected here)
    org.codehaus.plexus.ComponentB  b1;

    //(component with role-hint = &quot;bar&quot; will be injected here)
    org.codehaus.plexus.ComponentB  b2;
}</pre></div>
<p>Explicit specification into which field dependencies should be injected is considered to be a good pattern and might even be required in future versions of Plexus.</p></section><section>
<h4><a name="Configuration"></a>Configuration</h4>
<p>Lastly, there is an optional configuration section which is used to configure your component.</p>
<div class="source"><pre class="prettyprint linenums">...
&lt;component&gt;
  ...
  &lt;configuration&gt;
    &lt;a&gt;bleh&lt;/a&gt;
    &lt;b&gt;
      &lt;x&gt;1&lt;/x&gt;
      &lt;y&gt;2.0f&lt;/y&gt;
    &lt;/b&gt;
  &lt;/configuration&gt;
&lt;component&gt;
...</pre></div>
<p>You may read more about it <a href="./plexus-auto-configuration.html">here</a>.</p>
<p>And that's all you need to know about component configuration to get you started!</p>
<p><b>Important remark</b>: Component configuration and component requirements (definition of dependencies on some other components) are separated in Plexus. In some popular containers like Spring this is not the case. The reason for this is that component requirements are constant - components always needs to use the same set of services provided by other components in order to function properly. But configuration of a component is more dynamic. For example components which provide an implementation of a jdbc database connection pool must always be configured in each application which uses it.</p>
<p>If you want to learn more about more advanced options you can read <a href="./component-descriptor-specification.xml">Component Descriptor</a>.</p></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2001&#x2013;2022
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
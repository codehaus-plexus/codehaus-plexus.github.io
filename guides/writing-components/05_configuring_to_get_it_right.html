<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/guides/writing-components/05_configuring_to_get_it_right.apt at 2023-10-03
 | Rendered using Apache Maven Fluido Skin 1.11.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Rahul Thakur" />
    <meta name="date" content="2006-06-11" />
    <title>Plexus &#x2013; Configuring Plexus Components</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.11.2.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script src="../../js/apache-maven-fluido-1.11.2.min.js"></script>

    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
                _paq.push(['disableCookies']);
                    _paq.push(['trackPageView']);
                    _paq.push(['enableLinkTracking']);
        
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../.././" id="bannerLeft"><img src="../../images/plexus-logo-trans.png"  alt="Plexus" style="" /></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../.././" title="Plexus">Plexus</a><span class="divider">/</span></li>
      <li><a href="../../plexus-pom" title="Parent POM">Parent POM</a><span class="divider">/</span></li>
      <li><a href="../../" title="Plexus">Plexus</a><span class="divider">/</span></li>
    <li class="active ">Configuring Plexus Components <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/writing-components/05_configuring_to_get_it_right.apt"><img src="../../images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2023-10-03</li>
        <li class="pull-right"><a href="http://codehaus-plexus.github.io/" class="externalLink" title="Plexus">Plexus</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="../../index.html" title="Overview"><span class="none"></span>Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a href="../../" title="Books"><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="../../writing-components-trail/index.html" title="Writing Components"><span class="none"></span>Writing Components</a></li>
     </ul></li>
    <li><a href="../../" title="Guides"><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="../../guides/quick-start/getting-started.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
      <li><a href="../../guides/writing-components/00_index.html" title="Writing Plexus Components"><span class="none"></span>Writing Plexus Components</a></li>
      <li><a href="../../guides/developer-guide/index.html" title="Developer Guide"><span class="none"></span>Developer Guide</a></li>
     </ul></li>
    <li><a href="../../" title="Reference"><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="../../ref/why-use-components.html" title="Why Use Components?"><span class="none"></span>Why Use Components?</a></li>
      <li><a href="../../ref/plexus-descriptor.html" title="Plexus Descriptor"><span class="none"></span>Plexus Descriptor</a></li>
      <li><a href="../../guides/developer-guide/configuration/component-descriptor.html" title="Component Descriptor"><span class="none"></span>Component Descriptor</a></li>
      <li><a href="../../ref/component-configuration.html" title="Component Configuration"><span class="none"></span>Component Configuration</a></li>
      <li><a href="../../ref/technical-articles.html" title="Technical Articles"><span class="none"></span>Technical Articles</a></li>
      <li><a href="../../ref/available-components.html" title="Available Components"><span class="none"></span>Available Components</a></li>
      <li><a href="../../faq.html" title="FAQs"><span class="none"></span>FAQs</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="../../get-involved.html" title="Get Involved"><span class="none"></span>Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="../../modello/" title="Modello"><span class="none"></span>Modello</a></li>
    <li><a href="../../plexus-classworlds/" title="Plexus Classworlds"><span class="none"></span>Plexus Classworlds</a></li>
    <li><a href="../../" title="Plexus Components"><span class="icon-chevron-down"></span>Plexus Components</a>
     <ul class="nav nav-list">
      <li><a href="../../plexus-archiver/" title="Plexus Archiver"><span class="none"></span>Plexus Archiver</a></li>
      <li><a href="../../plexus-cli/" title="Plexus CLI"><span class="none"></span>Plexus CLI</a></li>
      <li><a href="../../plexus-compiler/" title="Plexus Compiler"><span class="none"></span>Plexus Compiler</a></li>
      <li><a href="../../plexus-digest/" title="Plexus Digest"><span class="none"></span>Plexus Digest</a></li>
      <li><a href="../../plexus-i18n/" title="Plexus i18n"><span class="none"></span>Plexus i18n</a></li>
      <li><a href="../../plexus-interactivity/" title="Plexus Interactivity"><span class="none"></span>Plexus Interactivity</a></li>
      <li><a href="../../plexus-interpolation/" title="Plexus Interpolation"><span class="none"></span>Plexus Interpolation</a></li>
      <li><a href="../../plexus-io/" title="Plexus IO"><span class="none"></span>Plexus IO</a></li>
      <li><a href="../../plexus-languages/" title="Plexus Languages"><span class="none"></span>Plexus Languages</a></li>
      <li><a href="../../plexus-resources/" title="Plexus Resources"><span class="none"></span>Plexus Resources</a></li>
      <li><a href="../../plexus-swizzle/" title="Plexus Swizzle"><span class="none"></span>Plexus Swizzle</a></li>
      <li><a href="../../plexus-velocity/" title="Plexus Velocity"><span class="none"></span>Plexus Velocity</a></li>
     </ul></li>
    <li><a href="../../" title="Plexus Parent POMs"><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
     <ul class="nav nav-list">
      <li><a href="../../plexus-pom/" title="Plexus"><span class="none"></span>Plexus</a></li>
      <li><a href="../../plexus-components/" title="Plexus Components"><span class="none"></span>Plexus Components</a></li>
     </ul></li>
    <li><a href="../../plexus-utils/" title="Plexus Utils"><span class="none"></span>Plexus Utils</a></li>
    <li><a href="../../plexus-xml/" title="Plexus XML"><span class="none"></span>Plexus XML</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://codehaus-plexus.github.io/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<p><code>The contents of this document are a work in progress</code></p><section>
<h2><a name="Configuring_a_Plexus_Component_via_descriptor"></a>Configuring a Plexus Component via descriptor</h2>
<p>We change the Component Role interface to look like this:</p>
<div class="source"><pre class="prettyprint linenums">public interface WebsiteMonitor
{

    /**
     * Role used to register component implementations with the container.
     */
    String ROLE = WebsiteMonitor.class.getName();

    /**
     * Monitor the specified website at the specified time intervals.
     * 
     * @throws Exception
     *             error encountered while performing the monitoring request.
     */
    public void monitor()
        throws Exception;

    /**
     * Specify a list of websites that can be monitored by this component.
     * 
     * @param websites List of websites
     */
    void addWebsites( List websites );

    /**
     * Determines if the website monitor component was properly initialized.
     *  
     * @return &lt;code&gt;true&lt;/code&gt; if initiailized, else &lt;code&gt;false&lt;/code&gt;.
     */
    boolean isInitialized();
}</pre></div>
<p>and, factor our component provider implementation to look like this:</p>
<div class="source"><pre class="prettyprint linenums">public class DefaultWebsiteMonitor
    extends AbstractLogEnabled
    implements WebsiteMonitor
{

    /**
     * Websites to monitor.
     * 
     * @plexus.configuration
     */
    private List websites;

    /**
     * @see org.codehaus.plexus.tutorial.WebsiteMonitor#monitor(java.lang.String)
     */
    public void monitor()
        throws Exception
    {
        HttpClient client = new HttpClient();

        for ( Iterator it = websites.iterator(); it.hasNext(); )
        {
            String website = (String) it.next();
            HttpMethod getMethod = new GetMethod( website );
            getMethod.setFollowRedirects( false );

            try
            {
                int statusCode = client.executeMethod( getMethod );

                if ( statusCode &lt; HttpStatus.SC_OK || statusCode &gt;= HttpStatus.SC_MULTIPLE_CHOICES )
                {
                    if ( getLogger().isErrorEnabled() )
                        getLogger().error(
                                           &quot;HTTP request returned HTTP status code: &quot; + statusCode + &quot; for website: &quot;
                                               + website );
                    throw new Exception( &quot;HTTP request returned HTTP status code: &quot; + statusCode + &quot; for website: &quot;
                        + website );
                }
                if ( getLogger().isInfoEnabled() )
                    getLogger().info(
                                      &quot;HTTP request returned HTTP status code: &quot; + statusCode + &quot; for website: &quot;
                                          + website );
            }
            catch ( UnknownHostException e )
            {
                if ( getLogger().isErrorEnabled() )
                    getLogger().error( &quot;Specified host '&quot; + website + &quot;' could not be resolved.&quot; );
                throw e;
            }
            finally
            {
                if ( null != getMethod )
                    getMethod.releaseConnection();
            }
        }
    }

    public void addWebsites( List websites )
    {
        this.websites = websites;
    }

    public boolean isInitialized()
    {
        return ( null != websites &amp;&amp; this.websites.size() &gt; 0 );
    }

}</pre></div>
<p>Note how <code>'websites'</code> is now a java.util.List property rather than a argument to the method. Also notice the annotation @plexus.configuration that indicates that this property is a plexus configuration element. This annotation is processed by Plexus' Component Descriptor Creator (or CDC). The CDC can parse and generate a components.xml from Java sources.</p>
<p>Now that we made <code>'websites'</code> to be a configuration property, we need to update the component's descriptor and specify values for websites. We add a list of websites as shown the the snippet below. Plexus container ensures that a component's fields are mapped and initialized and mapped from a component's configuration file. It can intelligently discover and map configuration items of different types like String, Lists (in this case). You can also specify you own configuration implementation class by specifying an <code>'implementation'</code> attribute on <code>&lt;configuration</code>&gt; element. Plexus will then attempt to inject the values from the XML configuration into the Configuration implementation's properties. Each of the nested element maps to a configuration property in the implementation class.</p>
<p>This mandates a change in the descriptor, which now looks something like this:</p>
<div class="source"><pre class="prettyprint linenums">&lt;component-set&gt;
  &lt;components&gt;
    &lt;component&gt;
      &lt;role&gt;org.codehaus.plexus.tutorial.WebsiteMonitor&lt;/role&gt;
      &lt;implementation&gt;
        org.codehaus.plexus.tutorial.DefaultWebsiteMonitor
      &lt;/implementation&gt;
      &lt;configuration&gt;
        &lt;websites&gt;
          &lt;website&gt;http://www.google.co.nz/&lt;/website&gt;
          &lt;website&gt;http://www.nonexistent.yadayada3249834739547.org/&lt;/website&gt;
          &lt;website&gt;http://maven.apache.org/&lt;/website&gt;
        &lt;/websites&gt;
      &lt;/configuration&gt;
    &lt;/component&gt;
  &lt;/components&gt;
&lt;/component-set&gt;</pre></div></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2001&#x2013;2023
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
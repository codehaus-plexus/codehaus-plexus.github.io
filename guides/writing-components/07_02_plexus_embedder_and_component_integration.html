<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/guides/writing-components/07_02_plexus_embedder_and_component_integration.apt at 2025-02-08
 | Rendered using Apache Maven Fluido Skin 2.0.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <meta name="author" content="Rahul Thakur" />
    <meta name="date" content="2006-11-15" />
    <title>Plexus Embedder and Component lookups – Plexus Site</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-2.0.1.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script src="../../js/apache-maven-fluido-2.0.1.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../.././"><img class="class java.lang.Object" src="../../images/plexus-logo-trans.png" alt="Plexus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../.././">Plexus</a><span class="divider">/</span></li>
      <li><a href="../../plexus-pom">Parent POM</a><span class="divider">/</span></li>
      <li><a href="../../">Plexus</a><span class="divider">/</span></li>
    <li class="active">Plexus Embedder and Component lookups <a href="https://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/writing-components/07_02_plexus_embedder_and_component_integration.apt"><img src="../../images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2025-02-07</li>
        <li class="pull-right"><span class="divider">|</span>
<a href="http://codehaus-plexus.github.io/" class="externalLink">Plexus</a></li>
        <li class="pull-right"><span class="divider">|</span>
<a href="https://www.eclipse.org/sisu/" class="externalLink">Eclipse Sisu</a></li>
        <li class="pull-right"><a href="https://jcp.org/en/jsr/detail?id=330" class="externalLink">JSR-330</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Plexus</li>
    <li><a href="../../index.html">Overview</a></li>
   <li class="nav-header">Old IoC Documentation</li>
    <li><a><span class="icon-chevron-down"></span>Books</a>
     <ul class="nav nav-list">
      <li><a href="../../writing-components-trail/index.html">Writing Components</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Guides</a>
     <ul class="nav nav-list">
      <li><a href="../../guides/quick-start/getting-started.html">Quick Start</a></li>
      <li><a href="../../guides/writing-components/00_index.html">Writing Plexus Components</a></li>
      <li><a href="../../guides/developer-guide/index.html">Developer Guide</a></li>
     </ul></li>
    <li><a><span class="icon-chevron-down"></span>Reference</a>
     <ul class="nav nav-list">
      <li><a href="../../ref/why-use-components.html">Why Use Components?</a></li>
      <li><a href="../../guides/developer-guide/configuration/component-descriptor.html">Component Descriptor</a></li>
      <li><a href="../../ref/component-configuration.html">Component Configuration</a></li>
      <li><a href="../../ref/available-components.html">Available Components</a></li>
     </ul></li>
   <li class="nav-header">Community</li>
    <li><a href="https://groups.google.com/g/mojohaus-dev" class="externalLink">Mailing Lists</a></li>
    <li><a href="../../get-involved.html">Get Involved</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../../project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">Plexus Projects</li>
    <li><a href="../../plexus-archiver/">Plexus Archiver</a></li>
    <li><a href="../../plexus-classworlds/">Plexus Classworlds</a></li>
    <li><a href="../../plexus-compiler/">Plexus Compiler</a></li>
    <li><a href="../../plexus-i18n/">Plexus i18n</a></li>
    <li><a href="../../plexus-interactivity/">Plexus Interactivity</a></li>
    <li><a href="../../plexus-interpolation/">Plexus Interpolation</a></li>
    <li><a href="../../plexus-io/">Plexus IO</a></li>
    <li><a href="../../plexus-languages/">Plexus Languages</a></li>
    <li><a href="../../modello/">Plexus Modello</a></li>
    <li><a href="../../plexus-pom/">Plexus Parent POM</a></li>
    <li><a href="../../plexus-resources/">Plexus Resources</a></li>
    <li><a href="../../plexus-utils/">Plexus Utils</a></li>
    <li><a href="../../plexus-velocity/">Plexus Velocity</a></li>
    <li><a href="../../plexus-xml/">Plexus XML</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="https://codehaus-plexus.github.io/" name="sitesearch" type="hidden" />
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<p><code>The contents of this document are a work in progress</code></p><section><a id="Plexus_Embedder"></a>
<h1>Plexus Embedder</h1>
<p>The Plexus Embedder allows us to set up and start a Plexus Container container from within a Standalone application. The components can then be looked up in usual manner (we will see demonstrate in bit, if you don't know). </p><section><a id="Making_Embedder_available_to_the_application"></a>
<h2>Making Embedder available to the application </h2>
<p>First thing, we need to make the Embedder available to our application by adding a dependency on it in the <code>pom.xml</code>. Follow snippet shows the relevant <code>&lt;dependency</code>&gt; section of the application project's <code>pom.xml</code>.</p>
<pre class="prettyprint linenums"><code>
&lt;project&gt;
  ...
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-website-monitor-component&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;    
    &lt;!-- Dependency to fetch Plexus Container implementation --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-container-default&lt;/artifactId&gt;
      &lt;version&gt;1.0-alpha-9&lt;/version&gt;     
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  ...
&lt;/project&gt;
</code></pre>
<p>Regenerate the IDE project again as discussed in the previous section.</p></section><section><a id="Starting_up_an_embedded_Plexus_Container_instance"></a>
<h2>Starting up an embedded Plexus Container instance</h2>
<p>Lets add some code to our Site Monitor application entry class that:</p>
<ol style="list-style-type: decimal;">
<li>creates and starts an Embedder instance</li>
<li>Obtains <code>PlexusContainer</code> instance, and</li>
<li>performs a lookup for <code>WebsiteMonitor</code> component
<p>Our updated code looks as below:</p>
<pre class="prettyprint linenums"><code>public class Main
{

    /**
     * @param args
     */
    public static void main( String[] args )
    {
        Embedder embedder = new Embedder();
        try
        {
            embedder.start();
            PlexusContainer container = embedder.getContainer();
            WebsiteMonitor monitor = (WebsiteMonitor) container.lookup( WebsiteMonitor.ROLE );
            try
            {
                monitor.monitor();
            }
            catch ( Exception e )
            {             
                e.printStackTrace();
            }

        }
        catch ( PlexusContainerException e )
        {
            e.printStackTrace();
        }
        catch ( ComponentLookupException e )
        {
            e.printStackTrace();
        }

    }

}</code></pre>
<p>At this point you can try running the above <code>Main</code> class from your favorite IDE. For demonstration purposes the <code>WebsiteMonitor</code> is by default configured to monitor <code>http://plexus.codehaus.org</code>. You should see it output the HTTP status for the monitoring request issued. </p>
<p>Something like this:</p>
<pre class="prettyprint linenums"><code>[INFO] HTTP request returned HTTP status code: 200 for website: http://plexus.codehaus.org/</code></pre></li></ol></section><section><a id="How_does_Plexus_Embedder_works.3F"></a>
<h2>How does Plexus Embedder works?</h2>
<p>Plexus Embedder creates an instance of Plexus Container, which then loads and parses all available dependencies to discover any Plexus Components and registers them internally to make them available for look-ups. </p>
<p>To recapture again, the container looks for a Component descriptor under:</p>
<ol style="list-style-type: decimal;">
<li>META-INF/plexus/components.xml
<p>This is exactly what those few lines of code achieve in the above snippet. You can, of course, use the Embedder to do fancier stuff.</p>
<p>Great! we have just finished integrating our site monitor component into our site monitor application.</p></li></ol></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2001–2025
<a href="https://codehaus-plexus.github.io/">Codehaus Plexus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>